<div class="detailed-info-page">
  @let video = video$ | async;
  @if (video) {
    @let snippet = video.snippet;
    <article class="video-card" appChangeColor [publicationDate]="snippet.publishedAt">
      <app-custom-link
        [attributeType]="'mat-icon-button'"
        [customClass]="'link-back'"
        class="link-back"
        [icon]="'menu_open'"
        appChangeColor
        [publicationDate]="snippet.publishedAt"
        [type]="'background'"
        routerLink="/"
      ></app-custom-link>
      <div class="video-image-container">
        @if (!imageLoaded()) {
          <mat-spinner class="spinner"></mat-spinner>
        }
        <img
          class="video-image"
          [class]="imageLoaded() ? 'shown' : ''"
          [alt]="snippet.title"
          (load)="imageLoaded.set(true)"
          [src]="snippet.thumbnails.high.url"
        />
      </div>
      <div class="video-info-container">
        <p class="video-publication-date">{{ snippet.publishedAt | date: 'EEEE, dd MMMM yyyy' }}</p>
        <h2 class="video-title">{{ snippet.title }}</h2>
        <p class="video-description">{{ snippet.description }}</p>
        <app-video-statistics [video]="video" class="video-statistics"></app-video-statistics>
      </div>
    </article>
  } @else if (video !== null) {
    <div class="not-found">
      <img class="not-found-image" src="../../../../assets/img/video-not-found.jpg" alt="Video not found" />
      <p class="not-found-text">We couldn't find this video</p>
      <app-custom-link [attributeType]="'mat-flat-button'" [customClass]="'to-main'" routerLink="/"
        >Go back to Main</app-custom-link
      >
    </div>
  } @else {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  }
</div>
